(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6474624a"],{"28a5":function(e,t,n){"use strict";var i=n("aae3"),l=n("cb7c"),a=n("ebd6"),s=n("0390"),o=n("9def"),c=n("5f1b"),r=n("520a"),u=n("79e5"),h=Math.min,d=[].push,f="split",p="length",m="lastIndex",v=4294967295,g=!u((function(){RegExp(v,"y")}));n("214f")("split",2,(function(e,t,n,u){var _;return _="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[p]||2!="ab"[f](/(?:ab)*/)[p]||4!="."[f](/(.?)(.?)/)[p]||"."[f](/()()/)[p]>1||""[f](/.?/)[p]?function(e,t){var l=String(this);if(void 0===e&&0===t)return[];if(!i(e))return n.call(l,e,t);var a,s,o,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,f=void 0===t?v:t>>>0,g=new RegExp(e.source,u+"g");while(a=r.call(g,l)){if(s=g[m],s>h&&(c.push(l.slice(h,a.index)),a[p]>1&&a.index<l[p]&&d.apply(c,a.slice(1)),o=a[0][p],h=s,c[p]>=f))break;g[m]===a.index&&g[m]++}return h===l[p]?!o&&g.test("")||c.push(""):c.push(l.slice(h)),c[p]>f?c.slice(0,f):c}:"0"[f](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,i){var l=e(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,l,i):_.call(String(l),n,i)},function(e,t){var i=u(_,e,this,t,_!==n);if(i.done)return i.value;var r=l(e),d=String(this),f=a(r,RegExp),p=r.unicode,m=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(g?"y":"g"),y=new f(g?r:"^(?:"+r.source+")",m),b=void 0===t?v:t>>>0;if(0===b)return[];if(0===d.length)return null===c(y,d)?[d]:[];var x=0,k=0,C=[];while(k<d.length){y.lastIndex=g?k:0;var w,$=c(y,g?d:d.slice(k));if(null===$||(w=h(o(y.lastIndex+(g?0:k)),d.length))===x)k=s(d,k,p);else{if(C.push(d.slice(x,k)),C.length===b)return C;for(var S=1;S<=$.length-1;S++)if(C.push($[S]),C.length===b)return C;k=x=w}}return C.push(d.slice(x)),C}]}))},7514:function(e,t,n){"use strict";var i=n("5ca1"),l=n("0a49")(5),a="find",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),i(i.P+i.F*s,"Array",{find:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},"7f56":function(e,t,n){},"8d28":function(e,t,n){"use strict";var i=n("7f56"),l=n.n(i);l.a},ad1a:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("file-reader")],1)},l=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],class:{FileReader:!0},staticStyle:{height:"calc(100vh - 84px)","background-color":"#dfdfdf"}},[n("table",{staticStyle:{width:"100%",height:"100%"}},[n("tr",{staticStyle:{height:"50px"}},[n("td",[n("table",{staticStyle:{width:"100%"}},[n("tr",[n("td",{staticStyle:{width:"116px"}},[n("div",[n("el-button",{staticStyle:{"border-radius":"100px",height:"42px"},attrs:{size:"mini",icon:"el-icon-back",round:""},on:{click:e.backCapture}}),e._v(" "),n("el-button",{staticStyle:{"border-radius":"100px",height:"42px"},attrs:{size:"mini",icon:"el-icon-refresh-right",round:""},on:{click:e.updateCapture}})],1)]),e._v(" "),n("td",[n("el-input",{attrs:{value:e.names.join("."),placeholder:"Файловый менеджер",onClick:"this.select();"}})],1)])])])]),e._v(" "),n("tr",[n("td",[e.languageCapture?n("div",[n("el-table",{attrs:{data:e.languageCapture.language}},[n("el-table-column",{attrs:{prop:"name",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{prop:"description",width:"200"}}),e._v(" "),n("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{clearable:""},on:{change:function(n){return e.updateTranslate(t.row)}},model:{value:t.row.translate,callback:function(n){e.$set(t.row,"translate",n)},expression:"row.row.translate"}})]}}])})],1)],1):n("div",{staticClass:"unselectable",staticStyle:{height:"100%","background-color":"white","overflow-y":"auto"},on:{contextmenu:function(t){return t.preventDefault(),e.contextMenuBoard(t)},click:function(t){t.stopPropagation(),e.selectFile(),e.context_menu.visible=!1}}},e._l(e.currentCapture,(function(t,i){return n("div",{key:i,class:{mini_preview:!0,select:e.select_file===t.id},on:{dblclick:function(n){e.getCapture({id:t.id,type:0===t.is_file?"folder":1===t.is_file?"file":"key"},t)},click:function(n){n.stopPropagation(),e.selectFile(t),e.context_menu.visible=!1},contextmenu:[function(n){return n.preventDefault(),e.contextMenuFile(n,t)},function(e){e.stopPropagation()}]}},[n("div",{staticClass:"icon"},[t.path&&0===t.is_file?n("svg-icon",{staticStyle:{width:"60px",height:"60px"},attrs:{"icon-class":"folder"}}):e._e(),e._v(" "),t.path&&1===t.is_file?n("svg-icon",{staticStyle:{width:"60px",height:"60px"},attrs:{"icon-class":e._f("iconClassFile")(t.file_type)}}):e._e(),e._v(" "),t.indexed?n("svg-icon",{staticStyle:{width:"60px",height:"60px"},attrs:{"icon-class":t.translates_count>0?"language":"keys"}}):e._e()],1),e._v(" "),n("div",{staticClass:"name"},[n("el-popover",{attrs:{placement:"left",title:"Инфо",width:"200",trigger:"hover",content:t.name}},[n("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.name))])])],1)])})),0)])]),e._v(" "),n("tr",{staticStyle:{height:"100px"}},[n("td",[e.select_file_object?n("table",{staticStyle:{width:"100%"}},[n("tr",[n("td",[e._v("Название:")]),e._v(" "),n("td",[n("input",{staticClass:"input_data",attrs:{onClick:"this.select();"},domProps:{value:e.select_file_object.name}})])]),e._v(" "),n("tr",[n("td",[e._v("Путь:")]),e._v(" "),n("td",[n("input",{staticClass:"input_data",attrs:{onClick:"this.select();"},domProps:{value:e.select_file_object.path}})])])]):e._e()])])]),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.context_menu.visible,expression:"context_menu.visible"}],staticClass:"contextmenu",style:{left:e.context_menu.left+"px",top:e.context_menu.top+"px",minWidth:"200px"}},e._l(e.context_menu.$el,(function(t,i){return n("li",{key:i,on:{click:function(n){t.click&&t.click(),e.context_menu.visible=!t.click}}},[e._v("\n      "+e._s(t.name)+"\n    ")])})),0)])},s=[],o=(n("7514"),n("7f7f"),n("0a66")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",[n("el-form-item",[n("div",{staticStyle:{"min-width":"100%",display:"flex"}},[e._v("\n        ${language} ${language_name} => Заменяется на [ru, en ...]\n      ")])]),e._v(" "),n("el-form-item",{attrs:{label:"Название"}},[n("el-input",{on:{input:e.filterS,change:e.filterS},model:{value:e.el.name,callback:function(t){e.$set(e.el,"name",t)},expression:"el.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Описание"}},[n("el-input",{model:{value:e.el.description,callback:function(t){e.$set(e.el,"description",t)},expression:"el.description"}})],1),e._v(" "),2===e.typeFile?n("el-form-item",{attrs:{label:"Тип файла"}},[n("el-select",{staticClass:"el-col-24",model:{value:e.el.file_type,callback:function(t){e.$set(e.el,"file_type",t)},expression:"el.file_type"}},[n("el-option",{attrs:{label:"Php",value:1}}),e._v(" "),n("el-option",{attrs:{label:"JavaScript",value:2}}),e._v(" "),n("el-option",{attrs:{label:"Json",value:3}}),e._v(" "),n("el-option",{attrs:{label:"Env",value:4}})],1)],1):e._e(),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{float:"right"},on:{click:e.saveFile}},[e._v("Сохранить")])],1)],1)],1)},r=[],u=(n("c5f6"),n("a481"),n("28a5"),"щ   ш  ч  ц  ю  я  ё  ж  ъ  ы  э  а б в г д е з и й к л м н о п р с т у ф х ь".split(/ +/g)),h="shh sh ch cz yu ya yo zh zz ii ye a b v g d e z i j k l m n o p r s t u f x z".split(/ +/g);function d(e,t){var n;for(e=t?e.replace(/_/g," "):e,n=0;n<u.length;n++)e=e.split(t?h[n]:u[n]).join(t?u[n]:h[n]),e=e.split(t?h[n].toUpperCase():u[n].toUpperCase()).join(t?u[n].toUpperCase():h[n].toUpperCase());return t?e:e.replace(/ /g,"_")}function f(e){var t=String;return t.prototype.withoutSymbol=function(){return this.replace(/[~,`,#,!,?,:,.,\-,=,(,),+,№,*,&,|,\,,>,<,@,\",\',1,2,3,4,5,6,7,8,9,0,$,%, ,^,\r,\\,\/,\t,&,\},\{,\[,\]]*/g,"").replace(/[а-я]/g,"").replace(/[А-Я]/g,"").replace(/[\n]/g,"")},new t(d(e))}var p={name:"CreateFileOrFolder",props:{typeFile:{type:Number,default:function(){return 1}},hook:{type:Number,default:function(){return 1}},callback:{type:Function,default:function(){}}},data:function(){return{el:{name:"",description:"",is_file:0,file_type:1}}},watch:{hook:function(e){this.el.name="",this.el.description=""},typeFile:function(e){1===this.typeFile?this.el.is_file=0:(this.el.is_file=1,this.el.file_type=1)}},created:function(){1===this.typeFile?this.el.is_file=0:this.el.is_file=1},methods:{filterS:function(e){this.el.name=f(this.el.name).withoutSymbol()},saveFile:function(){this.callback(this.el),this.$parent.close()}}},m=p,v=n("2877"),g=Object(v["a"])(m,c,r,!1,null,"4e5c26bb",null),_=g.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",[n("el-form-item",[n("div",{staticStyle:{"min-width":"100%",display:"flex"}},[e._v("\n        ${language} ${language_name} => Заменяется на [ru, en ...]\n      ")])]),e._v(" "),n("el-form-item",{attrs:{label:"Название"}},[n("el-input",{on:{input:e.filterS,change:e.filterS},model:{value:e.el.name,callback:function(t){e.$set(e.el,"name",t)},expression:"el.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Описание"}},[n("el-input",{model:{value:e.el.description,callback:function(t){e.$set(e.el,"description",t)},expression:"el.description"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Дата обновления"}},[n("div",{staticStyle:{"min-width":"100%",display:"flex"}},[e._v("\n        "+e._s(new Date(e.entity.updated_at).toISOString().slice(0,19).replace("T"," "))+"\n      ")])]),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{float:"right"},attrs:{type:"success"},on:{click:e.closeDialog}},[e._v("Обновить")])],1)],1)],1)},b=[],x={name:"PropertiesFolderAndFile",props:{entity:{type:Object,default:function(){}},callbackUpdate:{type:Function,default:function(){}}},data:function(){return{el:{name:"",description:""}}},watch:{entity:function(e){this.el.name=this.entity.name,this.el.description=this.entity.description}},beforeDestroy:function(){console.error("beforeDestroy")},created:function(){this.el.name=this.entity.name,this.el.description=this.entity.description},methods:{filterS:function(e){this.el.name=f(this.el.name).withoutSymbol()},closeDialog:function(){this.el.name===this.entity.name&&this.el.description===this.entity.description||this.callbackUpdate(this.el),this.$parent.close()}}},k=x,C=Object(v["a"])(k,y,b,!1,null,"a013ea16",null),w=C.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",[n("el-form-item",{attrs:{label:"Название"}},[n("el-input",{on:{input:e.filterS,change:e.filterS},model:{value:e.el.name,callback:function(t){e.$set(e.el,"name",t)},expression:"el.name"}})],1),e._v(" "),e.is_end?n("el-form-item",{attrs:{label:"Русский перевод"}},[n("el-input",{on:{input:e.filterS,change:e.filterS},model:{value:e.el.value,callback:function(t){e.$set(e.el,"value",t)},expression:"el.value"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"Описание"}},[n("el-input",{model:{value:e.el.description,callback:function(t){e.$set(e.el,"description",t)},expression:"el.description"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{float:"right"},on:{click:e.saveKey}},[e._v("Сохранить")])],1)],1)],1)},S=[],F=n("db72"),j={name:"CreateKeys",props:{hook:{type:Number,default:function(){return 0}},typeAdd:{type:Number,default:function(){return 0}},callback:{type:Function,default:function(){}}},data:function(){return{is_end:!1,el:{name:"",description:"",value:""}}},watch:{hook:function(){this.el.name="",this.el.description="",this.el.value="",this.el.is_end=!1},typeAdd:function(){this.is_end=3===this.typeAdd}},created:function(){this.is_end=3===this.typeAdd},methods:{filterS:function(e){this.el.name=f(this.el.name).withoutSymbol(),this.el.value=this.el.value.replace(/[~,`,@,\",\',$,%,^,\r,\\,\/,\t,&,\},\{,\[,\]]*/g,"").replace(/[\n]/g," ")},saveKey:function(){this.is_end?this.callback(Object(F["a"])(Object(F["a"])({},this.el),{},{translate:{}})):this.callback(Object(F["a"])(Object(F["a"])({},this.el),{},{translate:null})),this.$parent.close()}}},O=j,E=Object(v["a"])(O,$,S,!1,null,"ea2f21dc",null),A=E.exports,B={name:"FileReader",filters:{iconClassFile:function(e){var t=["php","js","json","env"];return t[e-1]}},data:function(){return{loading:!0,currentCapture:null,languageCapture:null,select_file:null,select_file_object:null,history:[],names:[],context_menu:{visible:!1,top:0,left:0,$el:[]}}},created:function(){this.getCapture()},methods:{updateProperty:function(e){this.$msgbox({title:"Свойства",message:this.$createElement(w,{props:{entity:e,callbackUpdate:function(t){Object(o["f"])("file",e.id,{method:e.path?"property":"propertyKey",next:t}).then((function(e){})).finally((function(){}))}}}),showConfirmButton:!1})},backCapture:function(){this.history.length>=2&&(this.history=this.history.slice(0,this.history.length-1),this.getCapture(this.history[this.history.length-1]))},updateCapture:function(){var e=this;this.loading=!0,this.select_file=null,this.select_file_object=null,this.$ws("FileReader",this.history[this.history.length-1]).then((function(t){Array.isArray(t.data)?(e.languageCapture=null,e.currentCapture=t.data):e.languageCapture=t.data||{}})).finally((function(){e.loading=!1}))},getCapture:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n&&(1===n.is_file||n.indexed)&&n.name.indexOf("}")<1?this.names.push(n.name):this.names.length>0&&(this.names=this.names.slice(0,this.names.length-1)),this.loading=!0,this.select_file=null,this.select_file_object=null,this.$ws("FileReader",t).then((function(n){e.history.length<1&&e.history.push(t),e.history.length>0&&e.history[e.history.length-1]!==t&&e.history.push(t),Array.isArray(n.data)?(e.languageCapture=null,e.currentCapture=n.data):e.languageCapture=n.data||{}})).finally((function(){e.loading=!1}))},updateTranslate:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n)return this.loading=!0,Object(o["f"])("translate",e.translate_id,{id:e.translate_id,language_id:e.id,value:e.translate}).then((function(e){t.updateCapture(),t.$message.success("Сохранено")})).catch((function(e){t.updateCapture()})),0;this.$alert("Обновить ключ?","Внимание",{showCancelButton:!0,confirmButtonText:"Обновить",cancelButtonText:"Отменить"}).then((function(n){t.loading=!0,Object(o["f"])("translate",e.translate_id,{id:e.translate_id,language_id:e.id,value:e.translate}).then((function(e){t.updateCapture(),t.$message.success("Сохранено")})).catch((function(e){t.updateCapture()}))}))},contextMenuBoard:function(e){var t=this;this.select_file=null,this.select_file_object=null,this.context_menu.top=e.clientY,this.context_menu.left=e.clientX,this.context_menu.$el=[],this.context_menu.visible=!0;var n=this.history[this.history.length-1];"folder"===n.type?(this.context_menu.$el.push({name:"Создать файл",click:function(){t.$msgbox({title:"Создать файл",showConfirmButton:!1,closeOnClickModal:!1,message:t.$createElement(_,{props:{typeFile:2,hook:Math.random(),callback:function(e){t.loading=!0,Object(o["e"])("file",{method:"makeFileDirectory",data:e,parent:n.id}).then((function(e){t.updateCapture()})).finally((function(){t.loading=!1}))}}})})}}),this.context_menu.$el.push({name:"Создать папку",click:function(){t.$msgbox({title:"Создать папку",showConfirmButton:!1,closeOnClickModal:!1,message:t.$createElement(_,{props:{typeFile:1,hook:Math.random(),callback:function(e){t.loading=!0,Object(o["e"])("file",{method:"makeFileDirectory",data:e,parent:n.id}).then((function(e){t.updateCapture()})).finally((function(){t.loading=!1}))}}})})}})):this.history.length>1&&(this.context_menu.$el.push({name:"Создать ключ",click:function(){var e=t.history.find((function(e){return"file"===e.type})).id,n=t.history.filter((function(e){return"key"===e.type})),i=n.length>0?n[n.length-1].id:null;t.$msgbox({title:"Создать ключ",showConfirmButton:!1,closeOnClickModal:!1,message:t.$createElement(A,{props:{typeAdd:3,hook:Math.random(),callback:function(n){t.loading=!0,Object(o["e"])("file",{method:"makeKey",data:n,parent:i,file_id:e}).then((function(e){t.updateTranslate({translate_id:e.data.translate.id,id:1,translate:n.value},!1),t.updateCapture()})).finally((function(){t.loading=!1}))}}})})}}),this.context_menu.$el.push({name:"Создать под.ключ",click:function(){var e=t.history.find((function(e){return"file"===e.type})).id,n=t.history.filter((function(e){return"key"===e.type})),i=n.length>0?n[n.length-1].id:null;t.$msgbox({title:"Создать под.ключ",showConfirmButton:!1,closeOnClickModal:!1,message:t.$createElement(A,{props:{typeAdd:4,hook:Math.random(),callback:function(n){t.loading=!0,Object(o["e"])("file",{method:"makeKey",data:n,parent:i,file_id:e}).then((function(e){t.updateCapture()})).finally((function(){t.loading=!1}))}}})})}}))},contextMenuFile:function(e,t){var n=this;this.selectFile(t),this.context_menu.top=e.clientY,this.context_menu.left=e.clientX,this.context_menu.$el=[],this.context_menu.visible=!0,this.context_menu.$el.push({name:"Свойства",click:function(){n.updateProperty(t)}}),this.context_menu.$el.push({name:"Удалить файл",click:function(){n.$alert("Удалить файл?","Внимание",{confirmButtonText:"Да удалить!",cancelButtonText:"Отменить",showCancelButton:!0}).then((function(e){n.loading=!0,Object(o["a"])("file",t.id,{method:t.indexed?"deleteKey":"deleteFile"}).then((function(e){n.updateCapture()})).finally((function(e){n.loading=!1}))}))}})},selectFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.id?(this.select_file=e.id,this.select_file_object=e):(this.select_file=null,this.select_file_object=null)}}},M=B,P=(n("8d28"),Object(v["a"])(M,a,s,!1,null,"043a26f8",null)),D=P.exports,z={name:"Files",components:{FileReader:D},data:function(){return{}},created:function(){}},R=z,T=Object(v["a"])(R,i,l,!1,null,"149c2a12",null);t["default"]=T.exports}}]);